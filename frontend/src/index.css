/* @TASK P5-T5.1 - TailwindCSS v4 + shadcn/ui 호환 스타일 */
/* @SPEC docs/plans/2026-01-29-labnote-ai-design.md#프론트엔드 */

@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* shadcn/ui 호환 디자인 토큰 (Light mode) */
  --color-background: oklch(100% 0 0);
  --color-foreground: oklch(9.8% 0.023 286);

  --color-card: oklch(100% 0 0);
  --color-card-foreground: oklch(9.8% 0.023 286);

  --color-popover: oklch(100% 0 0);
  --color-popover-foreground: oklch(9.8% 0.023 286);

  --color-primary: oklch(53.3% 0.177 263);
  --color-primary-foreground: oklch(98% 0.008 247);

  --color-secondary: oklch(96.1% 0.008 247);
  --color-secondary-foreground: oklch(11.2% 0.041 286);

  --color-muted: oklch(96.1% 0.008 247);
  --color-muted-foreground: oklch(46.9% 0.014 254);

  --color-accent: oklch(96.1% 0.008 247);
  --color-accent-foreground: oklch(11.2% 0.041 286);

  --color-destructive: oklch(60.2% 0.177 25);
  --color-destructive-foreground: oklch(98% 0.008 247);

  --color-border: oklch(91.4% 0.007 254);
  --color-input: oklch(91.4% 0.007 254);
  --color-ring: oklch(53.3% 0.177 263);

  --radius-lg: 0.5rem;
  --radius-md: calc(0.5rem - 2px);
  --radius-sm: calc(0.5rem - 4px);
}

/* Dark mode tokens */
.dark {
  --color-background: oklch(12% 0.01 280);
  --color-foreground: oklch(93% 0.005 260);
  --color-card: oklch(16% 0.012 270);
  --color-card-foreground: oklch(93% 0.005 260);
  --color-popover: oklch(16% 0.012 270);
  --color-popover-foreground: oklch(93% 0.005 260);
  --color-primary: oklch(65% 0.18 263);
  --color-primary-foreground: oklch(100% 0 0);
  --color-secondary: oklch(22% 0.015 260);
  --color-secondary-foreground: oklch(90% 0.005 260);
  --color-muted: oklch(20% 0.01 260);
  --color-muted-foreground: oklch(65% 0.01 260);
  --color-accent: oklch(22% 0.015 260);
  --color-accent-foreground: oklch(90% 0.005 260);
  --color-destructive: oklch(55% 0.2 25);
  --color-destructive-foreground: oklch(100% 0 0);
  --color-border: oklch(28% 0.01 260);
  --color-input: oklch(25% 0.01 260);
  --color-ring: oklch(65% 0.18 263);
}

* {
  border-color: var(--color-border);
}

html {
  overflow: hidden;
  height: 100%;
}

body {
  height: 100%;
  overflow: hidden;
  background-color: var(--color-background);
  color: var(--color-foreground);
  font-feature-settings: "rlig" 1, "calt" 1;
}

/* 기본 인터랙티브 요소 트랜지션 */
button,
a,
input,
select,
textarea {
  transition-property: color, background-color, border-color, box-shadow, opacity;
  transition-duration: 150ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* TipTap editor — heading styles (no @tailwindcss/typography plugin) */
.tiptap h1 {
  font-size: 2em;
  font-weight: 700;
  line-height: 1.2;
  margin: 0.67em 0;
}

.tiptap h2 {
  font-size: 1.5em;
  font-weight: 600;
  line-height: 1.3;
  margin: 0.6em 0;
}

.tiptap h3 {
  font-size: 1.25em;
  font-weight: 600;
  line-height: 1.4;
  margin: 0.5em 0;
}

.tiptap h4 {
  font-size: 1.1em;
  font-weight: 600;
  line-height: 1.4;
  margin: 0.5em 0;
}

/* TipTap editor — paragraph spacing */
.tiptap p {
  margin: 0.25em 0;
  line-height: 1.7;
}

/* TipTap editor — inline code */
.tiptap code {
  background-color: var(--color-muted);
  padding: 0.15em 0.4em;
  border-radius: 0.25rem;
  font-size: 0.875em;
}

/* TipTap editor — code block */
.tiptap pre {
  background-color: var(--color-muted);
  border: 1px solid var(--color-border);
  border-radius: 0.375rem;
  padding: 0.75em 1em;
  margin: 0.5em 0;
  overflow-x: auto;
}

.tiptap pre code {
  background: none;
  padding: 0;
  font-size: 0.875em;
}

/* TipTap editor — horizontal rule */
.tiptap hr {
  border: none;
  border-top: 1px solid var(--color-border);
  margin: 1em 0;
}

/* TipTap editor — links */
.tiptap a {
  color: var(--color-primary);
  text-decoration: underline;
  text-underline-offset: 2px;
}

.tiptap a:hover {
  opacity: 0.8;
}

/* TipTap editor — images */
.tiptap img {
  border-radius: 0.5rem;
  border: 1px solid var(--color-border);
  max-width: 100%;
  height: auto;
}

/* TipTap editor — restore list/blockquote styles stripped by Tailwind preflight */
.tiptap ul {
  list-style-type: disc;
  padding-left: 1.5em;
  margin: 0.5em 0;
}

.tiptap ol {
  list-style-type: decimal;
  padding-left: 1.5em;
  margin: 0.5em 0;
}

.tiptap ul ul { list-style-type: circle; }
.tiptap ul ul ul { list-style-type: square; }

.tiptap blockquote {
  border-left: 3px solid var(--color-primary);
  padding-left: 1em;
  margin: 0.5em 0;
  color: var(--color-muted-foreground);
  font-style: italic;
}

/* TipTap editor — table styles */
.tiptap table {
  border-collapse: collapse;
  width: 100%;
  margin: 0.5em 0;
  overflow: hidden;
}

.tiptap th,
.tiptap td {
  border: 1px solid var(--color-border);
  padding: 0.375rem 0.5rem;
  vertical-align: top;
  position: relative;
}

.tiptap th {
  background-color: var(--color-muted);
  font-weight: 600;
}

/* TipTap tableWrapper (generated when resizable: true) */
.tiptap .tableWrapper {
  overflow-x: auto;
  margin: 0.5em 0;
}

/* Column resize handle */
.tiptap .column-resize-handle {
  position: absolute;
  right: -2px;
  top: 0;
  bottom: -2px;
  width: 4px;
  background-color: var(--color-primary);
  pointer-events: none;
}

/* Selected cell highlight */
.tiptap .selectedCell::after {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--color-primary);
  opacity: 0.1;
  pointer-events: none;
}

/* 애니메이션 줄이기 선호 사용자 지원 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
