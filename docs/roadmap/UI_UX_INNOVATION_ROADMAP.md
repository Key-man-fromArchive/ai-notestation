# UI/UX Innovation Roadmap

> SiYuan Note UI/UX 분석 기반 — LabNote AI를 위한 인터페이스 혁신 로드맵
>
> 작성일: 2026-02-14 | 현재 버전: v1.3.1
>
> 참고: [SiYuan Note](https://github.com/siyuan-note/siyuan) (41K+ stars, TypeScript+Go)

---

## 현재 상태 vs SiYuan 비교 분석

### 우리가 이미 잘하고 있는 것

| 영역 | LabNote AI | SiYuan |
|------|-----------|--------|
| **AI 통합** | 6개 태스크, 4 프로바이더, SSE 스트리밍, 품질 게이트 | OpenAI만, 기본 Q&A |
| **하이브리드 검색** | FTS + Trigram + Semantic + RRF + AI 리파인 | 기본 전문 검색 |
| **OCR/Vision** | 3엔진 하이브리드 + 듀얼 파이프라인 배치 | Tesseract 단일 |
| **접근성** | ARIA, semantic HTML, reduced motion | 기본 수준 |
| **가상화 리스트** | TanStack Virtual (1000+ 노트) | 자체 동적 로딩 |
| **지식 그래프** | 2D 포스 그래프 + 클러스터 AI 분석 | 양방향 링크 그래프 |

### SiYuan에서 배워야 할 것

| 영역 | SiYuan | LabNote AI 현재 | 갭 |
|------|--------|----------------|-----|
| **멀티탭 에디터** | 탭 + 핀 + 드래그 | 단일 노트 뷰 | 🔴 Critical |
| **분할 화면** | 드래그로 좌우/상하 분할 | 없음 | 🔴 Critical |
| **도킹 패널** | 좌/우/하 독립 패널 8종 | 고정 사이드바만 | 🟡 High |
| **커맨드 팔레트** | 단축키로 빠른 액션 | 없음 | 🟡 High |
| **사이드바 접힘** | 토글 가능 | 고정 w-64 | 🟡 High |
| **다크 모드** | 테마 시스템 | Light only | 🟡 High |
| **문서 아웃라인** | 헤더 기반 네비게이션 | 없음 | 🟢 Medium |
| **브레드크럼** | 계층 위치 표시 | 없음 | 🟢 Medium |
| **블록 레퍼런스** | 양방향 링크 | 없음 | 🟢 Medium |
| **포커스 모드** | 블록 줌인 | 너비 조절만 | 🟢 Medium |
| **플래시카드** | FSRS 알고리즘 | 없음 | ⚪ Low (연구 특화 아님) |

---

## Phase UI-1 — Foundation UX (기반 다지기)

> 목표: 일상적 사용 경험의 질적 도약. 모든 사용자에게 즉시 체감되는 개선.
>
> 예상 버전: v1.4.0 | 난이도: ★★☆ ~ ★★★

### UI-1.1 접을 수 있는 사이드바 + 모바일 대응

**현재 문제**: 사이드바가 `w-64` 고정. 모바일에서 16.67% 면적 낭비. 노트 편집 시 전체 화면 활용 불가.

**구현 범위**:
- 햄버거 버튼으로 사이드바 토글 (데스크톱: 아이콘 모드 축소, 모바일: 오버레이)
- `localStorage`로 접힘 상태 유지
- 사이드바 축소 시 아이콘만 표시 (w-16), 호버로 확장
- 키보드 단축키: `Cmd/Ctrl + \`

**영향 파일**: `Layout.tsx`, `Sidebar.tsx`, `index.css`

```
┌──────────────────────────────────┐    ┌───────────────────────────────────┐
│ 🔲│           현재               │    │☰│          접힌 상태              │
│   │                              │    │📝│                                │
│ 📒│                              │ →  │🔍│    Main Content (flex-1)       │
│ 🔍│    Main Content              │    │📊│    훨씬 넓은 작업 영역          │
│ ⚙️│                              │    │⚙️│                                │
│   │                              │    │  │                                │
└──────────────────────────────────┘    └───────────────────────────────────┘
```

### UI-1.2 커맨드 팔레트 (Command Palette)

**현재 문제**: 모든 기능에 마우스 클릭으로만 접근. 파워 유저가 답답함을 느낌.

**구현 범위**:
- `Cmd/Ctrl + K`로 팔레트 열기
- 퍼지 검색으로 노트/노트북/기능 즉시 접근
- 최근 사용 항목 우선 표시
- 카테고리: 노트 열기, 페이지 이동, AI 기능, 설정
- SiYuan 참고: 슬래시 커맨드 (`/`) 에디터 내 지원

**영향 파일**: 새 `CommandPalette.tsx`, `Layout.tsx`에 글로벌 키 리스너

**구현 우선순위 명령**:
```
1순위: 노트 열기 (이름 검색)
2순위: 페이지 이동 (Search, Graph, Settings...)
3순위: AI 액션 (인사이트 생성, 맞춤법 검사...)
4순위: 설정 토글 (다크 모드, 사이드바...)
```

### UI-1.3 다크 모드

**현재 문제**: Light only. 야간 작업하는 연구자에게 눈의 피로.

**구현 범위**:
- OKLch 기반 다크 컬러 토큰 추가 (`index.css`)
- `prefers-color-scheme` 자동 감지 + 수동 토글
- Settings에서 테마 선택 (Light / Dark / System)
- 그래프 시각화, 에디터, 마크다운 렌더링 모두 대응
- TipTap 에디터 커스텀 스타일 다크 대응

**영향 파일**: `index.css` (토큰), `Settings.tsx`, `Layout.tsx` (토글), 전 컴포넌트 (semantic 토큰 사용 시 자동 적용)

**색상 전략** (OKLch):
```css
/* 현재 Light */
--color-background: oklch(100% 0 0);        /* White */
--color-foreground: oklch(9.8% 0.023 286);  /* Near-black */

/* 추가 Dark */
--color-background: oklch(14.5% 0.015 260); /* Deep navy-gray */
--color-foreground: oklch(92% 0.008 260);   /* Off-white */
--color-primary: oklch(65% 0.18 263);       /* Brighter violet for contrast */
```

### UI-1.4 브레드크럼 네비게이션

**현재 문제**: 노트 상세 페이지에서 "내가 어디에 있는지" 불분명. 뒤로가기만 의존.

**구현 범위**:
- 페이지 상단 브레드크럼: `홈 > 노트북 이름 > 노트 제목`
- 클릭으로 상위 계층 이동
- SiYuan 참고: 블록 줌인 시 경로 표시

**영향 파일**: 새 `Breadcrumb.tsx`, 각 페이지 상단 삽입

### UI-1.5 글로벌 키보드 단축키 시스템

**현재 문제**: 단축키가 컴포넌트별로 산발적. 체계적 관리 없음.

**구현 범위**:
- 단축키 레지스트리 (충돌 감지, 범위 관리)
- 기본 단축키 세트:

| 단축키 | 동작 |
|--------|------|
| `Cmd+K` | 커맨드 팔레트 |
| `Cmd+\` | 사이드바 토글 |
| `Cmd+S` | 노트 저장 (기존) |
| `Cmd+F` | 페이지 내 검색 |
| `Cmd+Shift+F` | 글로벌 검색 |
| `Cmd+N` | 새 노트 |
| `Cmd+,` | 설정 |
| `Escape` | 팔레트/모달 닫기 |

- Settings에 "키보드 단축키" 탭 추가 (확인용, 커스터마이즈는 향후)
- `?` 키로 단축키 도움말 오버레이

**영향 파일**: 새 `hooks/useShortcuts.ts`, `Layout.tsx`

---

## Phase UI-2 — Editor Evolution (에디터 진화)

> 목표: 단일 노트 뷰에서 멀티 문서 워크스페이스로 진화. 연구자의 비교/참조 워크플로우 지원.
>
> 예상 버전: v1.5.0 | 난이도: ★★★ ~ ★★★★

### UI-2.1 멀티탭 에디터

**현재 문제**: 노트를 하나만 열 수 있음. 참조할 다른 노트를 보려면 뒤로 갔다가 돌아와야 함.

**구현 범위**:
- 메인 콘텐츠 영역 상단에 탭 바
- 탭 열기/닫기/순서 변경 (드래그)
- 활성 탭 하이라이트, 수정된 탭에 점(●) 표시
- 탭 핀 고정 (SiYuan의 `item--pin` 패턴)
- 최대 탭 수 제한 (기본 8, 설정 가능)
- URL 동기화: 활성 탭의 노트 ID가 URL에 반영

**SiYuan 참고 포인트**:
- `Tab.ts`: 탭 드래그 시 opacity 0.38, 창 밖 드래그 시 새 창
- `Wnd` 컨테이너가 여러 Tab을 관리
- 핀된 탭은 배열 앞쪽으로 이동

**아키텍처**:
```
┌─ TabBar ──────────────────────────────────────────┐
│ [📌 연구 노트] [실험 기록 ●] [참고문헌] [+]       │
├───────────────────────────────────────────────────┤
│                                                    │
│              Active Tab Content                    │
│           (NoteDetail component)                   │
│                                                    │
└───────────────────────────────────────────────────┘
```

**영향 파일**: 새 `TabManager.tsx`, `hooks/useTabState.ts`, `NoteDetail.tsx` 리팩토링

### UI-2.2 분할 화면 (Split View)

**현재 문제**: 두 노트를 나란히 비교할 수 없음. 연구에서 가장 흔한 패턴인 "읽으면서 쓰기" 불가.

**구현 범위**:
- 탭을 드래그하여 좌/우 분할 (SiYuan의 `Layout` 클래스 `direction: "lr"`)
- 최대 2분할 (초과 분할은 복잡도 대비 가치 낮음)
- 리사이즈 드래그 바 (Graph 페이지의 기존 패널 리사이즈 패턴 활용)
- 단축키: `Cmd+Shift+\` 로 분할 토글

**SiYuan 참고 포인트**:
- `Layout` 클래스: `fn__flex` (수평) / `fn__flex-column` (수직) CSS 전환
- `addWnd()`: 애니메이션 제거 후 분할 삽입 (시각적 끊김 방지)
- `size: "auto"` → `fn__flex-1` 로 균등 분배

**영향 파일**: `Layout.tsx` 확장, 새 `SplitView.tsx`, `TabManager.tsx` 통합

### UI-2.3 문서 아웃라인 패널

**현재 문제**: 긴 노트에서 특정 섹션으로 이동할 방법이 스크롤밖에 없음.

**구현 범위**:
- 에디터 우측에 접을 수 있는 아웃라인 패널
- H1~H6 헤더 자동 추출 (TipTap의 `getJSON()` 활용)
- 클릭 시 해당 위치로 스무스 스크롤
- 현재 보고 있는 섹션 하이라이트 (Intersection Observer)
- 노트 목차 역할

**SiYuan 참고**: `Outline.ts` — 헤더 기반 문서 구조 네비게이션

**영향 파일**: 새 `OutlinePanel.tsx`, `NoteEditor.tsx` 연동

### UI-2.4 포커스/젠 모드

**현재 문제**: 집중 글쓰기 시 사이드바, 탭, 패널이 산만함.

**구현 범위**:
- `F11` 또는 `Cmd+Shift+Enter`로 전체 화면 에디터
- 사이드바, 탭 바, 브레드크럼 모두 숨김
- 에디터만 중앙 정렬 (max-width: 720px)
- `Escape`로 복귀
- SiYuan의 "블록 줌인" 개념 차용: 특정 섹션에 집중

**영향 파일**: `NoteDetail.tsx`, `Layout.tsx` 조건부 렌더링

---

## Phase UI-3 — Workspace Intelligence (워크스페이스 지능화)

> 목표: 도킹 패널 시스템으로 개인화된 워크스페이스. AI가 맥락에 맞는 정보를 자동 서피스.
>
> 예상 버전: v2.0.0 | 난이도: ★★★★

### UI-3.1 도킹 패널 시스템

**현재 문제**: AI 패널, 관련 노트, 첨부파일이 NoteDetail 페이지 내에 하드코딩. 유연하게 열고 닫을 수 없음.

**구현 범위**:
- 우측 도킹 영역 (토글 가능)
- 패널 종류:
  - 📝 **아웃라인** (UI-2.3 확장)
  - 🤖 **AI 어시스턴트** (기존 NoteAIPanel 독립)
  - 🔗 **관련 노트** (pgvector 유사도 기반)
  - 📎 **첨부파일** (이미지/PDF 미리보기)
  - 🏷️ **태그** (노트 태그 관리)
  - 🔙 **백링크** (이 노트를 참조하는 노트들)
- 탭으로 패널 전환, 드래그로 순서 변경
- 패널 상태 `localStorage` 유지

**SiYuan 참고**:
- `dock/` 폴더: Backlink, Bookmark, Files, Graph, Inbox, Outline, Tag, Custom — 8종 독립 패널
- 좌/우/하단 3방향 도킹 지원
- 커스텀 패널로 확장 가능

**아키텍처**:
```
┌───────┬──────────────────────────┬──────────┐
│       │  TabBar                  │ 📝 AI 🔗 │
│ Side  │  ─────────────────────── │──────────│
│ bar   │                          │ Related  │
│       │     Editor Content       │ Notes    │
│       │                          │          │
│       │                          │ • Note A │
│       │                          │ • Note B │
│       │                          │ • Note C │
└───────┴──────────────────────────┴──────────┘
```

**영향 파일**: 새 `DockPanel.tsx`, `hooks/useDockState.ts`, NoteDetail 리팩토링

### UI-3.2 Quick Switcher (빠른 노트 전환)

**현재 문제**: 노트 목록에서 스크롤해서 찾아야 함. 커맨드 팔레트의 노트 검색 확장.

**구현 범위**:
- `Cmd+O`로 전용 노트 스위처 열기
- 최근 열었던 노트 목록 (시간순)
- 타이핑 시 퍼지 매칭 (제목 + 노트북 이름)
- 키보드로만 노트 전환 완료 (마우스 불필요)
- 미리보기: 선택한 노트의 첫 몇 줄 표시

**영향 파일**: 커맨드 팔레트 확장 또는 별도 `QuickSwitcher.tsx`

### UI-3.3 컨텍스트 인식 AI 사이드바

**현재 문제**: AI 기능 사용하려면 AI Workbench 페이지로 이동하거나 NoteDetail 내 AI 패널 사용. 컨텍스트 전환 비용.

**구현 범위**:
- 에디터에서 텍스트 선택 → 플로팅 AI 메뉴
  - "이 부분 설명해줘"
  - "맞춤법 검사"
  - "이어서 써줘"
  - "요약"
- 선택한 텍스트가 AI에 자동 컨텍스트로 전달
- 결과를 인라인 삽입 또는 사이드 패널에 표시
- SiYuan의 슬래시 커맨드 (`/ai`) 패턴 참고

**영향 파일**: `NoteEditor.tsx` (선택 감지), 새 `FloatingAIMenu.tsx`

### UI-3.4 워크스페이스 레이아웃 저장/복원

**현재 문제**: 열린 탭, 패널, 분할 상태가 새로고침하면 사라짐.

**구현 범위**:
- 현재 워크스페이스 상태 자동 저장 (열린 탭, 분할, 패널 상태)
- 이름 붙인 워크스페이스 프리셋: "논문 리뷰", "실험 기록", "데이터 분석"
- 워크스페이스 빠른 전환

**영향 파일**: `hooks/useWorkspace.ts`, Settings 확장

---

## Phase UI-4 — Advanced Interactions (고급 인터랙션)

> 목표: 지식 관리의 깊이를 더하는 고급 기능. 연구자 워크플로우에 최적화.
>
> 예상 버전: v2.1.0 | 난이도: ★★★★ ~ ★★★★★

### UI-4.1 블록 레퍼런스 & 백링크

**현재 문제**: 노트 간 연결이 그래프 시각화에만 존재. 노트 본문에서 다른 노트를 직접 참조할 수 없음.

**구현 범위**:
- `[[노트 제목]]` 또는 `((블록 ID))` 문법으로 다른 노트 링크
- 에디터에서 `[[` 입력 시 자동완성 드롭다운
- 백링크 패널: "이 노트를 참조하는 다른 노트들" 목록
- 호버 시 참조된 노트 미리보기 (팝오버)
- 양방향 링크 자동 관리

**SiYuan 핵심**: 블록 레벨 양방향 링크가 SiYuan의 가장 강력한 기능. Backlink 패널에서 참조 맥락까지 표시.

**영향**: DB 스키마 변경 (note_links 테이블), TipTap 커스텀 노드, 백엔드 API

### UI-4.2 인라인 AI 액션 (에디터 통합)

**UI-3.3의 확장**:
- 에디터 내 `/` 슬래시 커맨드:
  - `/ai-insight` — 현재 노트 인사이트
  - `/ai-continue` — 이어서 작성
  - `/ai-translate` — 번역
  - `/ai-table` — 표로 정리
  - `/ai-diagram` — 다이어그램 생성 제안
- AI 응답이 에디터 블록으로 직접 삽입
- 실행 취소/다시 실행 지원

### UI-4.3 PDF 인라인 주석 & 하이라이트

**현재 문제**: PDF에서 텍스트 추출만 가능. 원문에서 특정 위치를 참조할 수 없음.

**구현 범위**:
- PDF 뷰어 내장 (pdf.js)
- 하이라이트 → 노트에 인용으로 삽입
- 하이라이트에 메모 추가
- PDF 특정 페이지/위치로 딥링크

**SiYuan 참고**: "PDF 주석 링크" — PDF 내 위치를 블록으로 참조

### UI-4.4 연구 데이터 테이블 뷰

**현재 문제**: 실험 데이터를 구조화하려면 외부 스프레드시트 필요.

**구현 범위**:
- 노트 내 인라인 데이터 테이블 블록
- 정렬, 필터, 집계 (평균, 합계, 카운트)
- CSV 가져오기/내보내기
- 간단한 차트 생성 (막대, 선, 산점도)

**SiYuan 참고**: "Database 모듈" — Notion 스타일 데이터베이스 with relation/rollup

---

## 전체 우선순위 매트릭스

| ID | 기능 | 영향도 | 난이도 | 의존성 | 근거 |
|----|------|--------|--------|--------|------|
| **UI-1.1** | 접을 수 있는 사이드바 | ★★★★★ | ★★☆☆☆ | 없음 | 모바일 필수, 즉시 체감 |
| **UI-1.2** | 커맨드 팔레트 | ★★★★★ | ★★★☆☆ | 없음 | 파워유저 생산성 핵심 |
| **UI-1.3** | 다크 모드 | ★★★★☆ | ★★★☆☆ | 없음 | 야간 사용자 요청 1위 |
| **UI-1.4** | 브레드크럼 | ★★★☆☆ | ★☆☆☆☆ | 없음 | 작은 노력, 큰 네비게이션 개선 |
| **UI-1.5** | 키보드 단축키 | ★★★★☆ | ★★☆☆☆ | UI-1.2 | 팔레트와 함께 구축 |
| **UI-2.1** | 멀티탭 에디터 | ★★★★★ | ★★★★☆ | UI-1.1 | SiYuan 핵심 UX, 연구 워크플로우 필수 |
| **UI-2.2** | 분할 화면 | ★★★★☆ | ★★★★☆ | UI-2.1 | 탭 시스템 위에 구축 |
| **UI-2.3** | 문서 아웃라인 | ★★★☆☆ | ★★☆☆☆ | 없음 | 긴 문서 네비게이션 |
| **UI-2.4** | 포커스 모드 | ★★★☆☆ | ★★☆☆☆ | UI-1.1 | 사이드바 접기 확장 |
| **UI-3.1** | 도킹 패널 | ★★★★★ | ★★★★★ | UI-2.1 | 큰 아키텍처 변경 |
| **UI-3.2** | Quick Switcher | ★★★★☆ | ★★☆☆☆ | UI-1.2 | 팔레트 확장 |
| **UI-3.3** | 컨텍스트 AI 사이드바 | ★★★★☆ | ★★★☆☆ | UI-3.1 | AI 차별화 핵심 |
| **UI-3.4** | 워크스페이스 저장 | ★★★☆☆ | ★★★☆☆ | UI-2.1+3.1 | 모든 레이아웃 기능 위에 |
| **UI-4.1** | 블록 레퍼런스 | ★★★★★ | ★★★★★ | DB 변경 | 지식 관리 본질 |
| **UI-4.2** | 인라인 AI 액션 | ★★★★☆ | ★★★☆☆ | UI-3.3 | AI 통합 극대화 |
| **UI-4.3** | PDF 인라인 주석 | ★★★☆☆ | ★★★★☆ | 없음 | 연구자 특화 |
| **UI-4.4** | 데이터 테이블 뷰 | ★★★☆☆ | ★★★★★ | 없음 | Notion 수준 기능 |

---

## 구현 순서 제안

```
v1.4.0 (Phase UI-1: Quick Wins)
├── UI-1.1 접을 수 있는 사이드바     (2-3일)
├── UI-1.4 브레드크럼               (1일)
├── UI-1.5 키보드 단축키 시스템      (2일)
├── UI-1.2 커맨드 팔레트            (3-4일)
└── UI-1.3 다크 모드                (3-4일)

v1.5.0 (Phase UI-2: Editor)
├── UI-2.3 문서 아웃라인            (2일)
├── UI-2.4 포커스 모드              (1-2일)
├── UI-2.1 멀티탭 에디터            (5-7일)
└── UI-2.2 분할 화면               (3-4일)

v2.0.0 (Phase UI-3: Workspace)
├── UI-3.1 도킹 패널               (7-10일)
├── UI-3.2 Quick Switcher          (2일)
├── UI-3.3 컨텍스트 AI 사이드바      (4-5일)
└── UI-3.4 워크스페이스 저장         (2-3일)

v2.1.0 (Phase UI-4: Advanced)
├── UI-4.1 블록 레퍼런스 & 백링크    (10-14일)
├── UI-4.2 인라인 AI 액션           (3-4일)
├── UI-4.3 PDF 인라인 주석          (5-7일)
└── UI-4.4 데이터 테이블 뷰         (7-10일)
```

---

## 디자인 원칙

1. **Progressive Disclosure** — 기본은 심플, 파워 기능은 단축키/커맨드로 접근
2. **Context Preservation** — 페이지 이동 최소화. 탭, 패널, 분할로 맥락 유지
3. **Keyboard First** — 모든 핵심 동작은 키보드로 완료 가능해야 함
4. **AI is Ambient** — AI가 별도 페이지가 아니라 에디터 안에서 자연스럽게 동작
5. **Research-Native** — 일반 노트앱이 아닌, 연구/실험 워크플로우에 최적화
6. **Respect Existing Patterns** — shadcn/ui + TailwindCSS v4 + OKLch 토큰 체계 유지

---

## SiYuan에서 차용하지 않는 것

| SiYuan 기능 | 불채택 이유 |
|------------|-----------|
| Electron 데스크톱 앱 | 우리는 웹 앱 (Docker self-hosted). Electron 오버헤드 불필요 |
| `siyuan://` 프로토콜 | 웹 URL 기반으로 충분 |
| 커뮤니티 마켓플레이스 | 초기 단계에서는 코어 기능에 집중 |
| 플래시카드 (FSRS) | 연구 노트 관리에 불필요. 학습 도구가 아님 |
| WebDAV/S3 동기화 | Synology NoteStation이 유일한 소스 |
| JavaScript/CSS 스니펫 | 보안 리스크. 설정 기반 커스터마이즈로 충분 |
| 블록 레벨 세밀한 편집 | TipTap이 충분한 수준 제공. 완전한 블록 시스템은 과도한 복잡도 |

---

*이 로드맵은 기존 ROADMAP.md (기능 중심)와 상호보완적입니다.*
*기능 로드맵 = Phase 1-5, UI/UX 로드맵 = Phase UI-1~4*
*두 트랙은 독립적으로 진행 가능하며, 버전은 함께 릴리스합니다.*
